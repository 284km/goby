class Plugin
  attr_reader :context

  def initialize
    @context = PluginContext.new

    yield(context)
  end

  class PluginContext
    attr_accessor :funcs, :pkgs

    def initialize
      @funcs = []
      @pkgs = []
    end

    def add_func(prefix, name)
      @funcs.push({ prefix: prefix, name: name })
    end

    def add_pkg(prefix, name)
      @pkgs.push({ prefix: prefix, name: name })
    end
  end
end